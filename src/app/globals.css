@import "tailwindcss";

:root {
  --background: #FAFAF9;
  --foreground: #0f172a;
  /* Brand palette (tweak to match logo precisely) */
  --brand-primary: #FDC239; /* requested accent */
  --brand-secondary: #FDC239; /* unify accent usage */
  --brand-accent: #FDC239;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  /* Expose brand colors to utilities if needed */
  --color-brand-primary: var(--brand-primary);
  --color-brand-secondary: var(--brand-secondary);
  --color-brand-accent: var(--brand-accent);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #FAFAF9;
    --foreground: #0f172a;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans), ui-sans-serif, system-ui, -apple-system,
    "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji";
}

/* Subtle background pattern overlay */
.bg-pattern {
  background-image:
    radial-gradient(circle at 1px 1px, color-mix(in oklab, var(--brand-primary) 12%, transparent) 1px, transparent 1px),
    linear-gradient(to bottom, transparent, transparent);
  background-size: 18px 18px, auto;
}

/* Smooth scroll for anchor links */
html {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch; /* Improves scrolling on iOS */
  -webkit-text-size-adjust: 100%; /* Prevents iOS font size adjustment */
  -webkit-tap-highlight-color: transparent; /* Removes tap highlight on iOS */
  -webkit-touch-callout: none; /* Disables callout on iOS */
  -webkit-user-select: none; /* Prevents text selection on iOS */
  -webkit-tap-highlight-color: rgba(0,0,0,0); /* Removes tap highlight */
}

/* iOS-specific fixes */
body {
  -webkit-overflow-scrolling: touch;
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  overscroll-behavior: none; /* Prevents bounce scrolling on iOS */
  -webkit-transform: translateZ(0); /* Force GPU acceleration carefully */
}

/* Section container utility */
.section-container {
  @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
}

/* Wider container for header on large screens */
.section-container--wide {
  max-width: 88rem; /* ~1408px */
}
@media (min-width: 1536px) { /* 2xl */
  .section-container--wide { max-width: 96rem; /* 1536px */ }
}
@media (min-width: 1920px) { /* 3xl-like */
  .section-container--wide { max-width: 104rem; /* 1664px */ }
}

/* Glass-like card */
.glass {
  @apply bg-white/70 dark:bg-white/5 backdrop-blur-md border border-black/5 dark:border-white/10 shadow-lg;
}

/* Fix for iOS touch events */
a, button {
  -webkit-tap-highlight-color: transparent; /* Removes tap highlight on iOS */
  touch-action: manipulation; /* Improves touch responsiveness */
  -webkit-touch-callout: none; /* Disables callout on iOS */
  -webkit-user-select: none; /* Prevents text selection on iOS */
}

/* iOS video fixes - optimized to prevent crashes */
video {
  -webkit-playsinline: true;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  object-fit: cover;
  width: 100%;
  height: 100%;
  /* Prevent excessive memory usage on iOS */
  max-width: 100vw;
  max-height: 100vh;
  will-change: auto; /* Don't force GPU layers unnecessarily */
}

/* iOS scroll fixes - reduce to specific elements to prevent memory issues */
.section-container, main, section {
  -webkit-overflow-scrolling: touch;
}

/* Reduce animations on iOS to prevent crashes */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Prevent iOS zoom on input focus */
input, textarea, select {
  font-size: 16px; /* Prevents zoom on iOS */
  -webkit-appearance: none;
  border-radius: 0;
}

/* iOS-specific button fixes */
button {
  -webkit-appearance: none;
  border-radius: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
}

/* Gradient accents */
.gradient-text {
  @apply bg-gradient-to-r from-[var(--brand-primary)] via-[var(--brand-secondary)] to-[var(--brand-accent)] bg-clip-text text-transparent;
}

.btn-primary {
  @apply inline-flex items-center justify-center rounded-full px-6 py-3 text-sm font-semibold shadow-sm transition;
  background: var(--brand-primary);
  color: #000000;
}

.btn-outline {
  @apply inline-flex items-center justify-center rounded-full px-6 py-3 text-sm font-semibold transition;
  border: 1px solid color-mix(in oklab, var(--brand-primary) 50%, transparent);
  background: transparent;
  color: var(--foreground);
  &:hover { background: color-mix(in oklab, var(--brand-primary) 15%, transparent); }
}

/* Focus ring helper using brand color */
.focus-brand:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--brand-primary);
}

/* ===== Animations & Motion Utilities ===== */
@keyframes fade-in-up {
  0% { opacity: 0; transform: translateY(12px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes scale-in {
  0% { opacity: 0; transform: scale(0.98); }
  100% { opacity: 1; transform: scale(1); }
}

.reveal {
  opacity: 0;
  animation: fade-in-up 700ms ease forwards;
}

.reveal.delay-1 { animation-delay: 120ms; }
.reveal.delay-2 { animation-delay: 240ms; }
.reveal.delay-3 { animation-delay: 360ms; }

.scale-in { animation: scale-in 500ms ease forwards; }

.hover-lift {
  @apply transition;
  transform: translateY(0);
}
.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 24px -8px color-mix(in oklab, var(--brand-primary) 35%, transparent);
}

/* Refined card hover */
.card-hover {
  transition: transform 250ms ease, box-shadow 250ms ease;
}
.card-hover:hover {
  transform: translateY(-6px) scale(1.01);
  box-shadow: 0 18px 36px -14px color-mix(in oklab, var(--brand-primary) 40%, transparent);
}

/* Header shrink + shadow */
.header {
  transition: box-shadow 200ms ease, background-color 200ms ease, transform 200ms ease, height 200ms ease, padding 200ms ease;
}
.header--scrolled {
  box-shadow: 0 6px 24px -16px rgba(0,0,0,0.25);
  background-color: rgba(255,255,255,0.9);
}

/* Animated underline nav */
.nav-link {
  position: relative;
}
.nav-link::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  height: 2px;
  width: 0;
  background: var(--brand-primary);
  border-radius: 9999px;
  transition: width 220ms ease;
}
.nav-link:hover::after, .nav-link--active::after {
  width: 100%;
}

/* Button hover polish */
.btn-primary {
  @apply inline-flex items-center justify-center rounded-full px-6 py-3 text-sm font-semibold shadow-sm transition;
  background: #023047;
  color: #ffffff;
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px -10px color-mix(in oklab, #023047 45%, transparent);
}

.accent-underline {
  position: relative;
}
.accent-underline::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  height: 3px;
  width: 64px;
  background: var(--brand-primary);
  border-radius: 9999px;
}

/* Hero animated blobs - optimized for iOS */
.hero-blob {
  position: absolute;
  filter: blur(44px);
  opacity: 0.32;
  /* Disable animation on iOS to prevent performance issues */
  animation: float-slow 14s ease-in-out infinite;
}

/* Disable heavy animations on iOS devices */
@supports (-webkit-touch-callout: none) {
  .hero-blob {
    animation: none !important;
    filter: blur(32px); /* Reduce blur for better performance */
  }
}

@keyframes float-slow {
  0% { transform: translate3d(0,0,0) scale(1); }
  50% { transform: translate3d(12px,-10px,0) scale(1.05); }
  100% { transform: translate3d(0,0,0) scale(1); }
}
